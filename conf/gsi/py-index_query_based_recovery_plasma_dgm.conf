gsi.plasma_recovery.SecondaryIndexingPlasmaDGMRecoveryTests:
# test with couchbase bucket compaction
    test_couchbase_bucket_compaction,nodes_init=4,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-index-index,GROUP=P0,gsi_type=plasma,plasma_dgm=True
# test with warm up
    test_warmup,nodes_init=4,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-index-index,GROUP=P0,gsi_type=plasma,plasma_dgm=True
# test with rebalance-in
    test_rebalance_in,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=index,services_init=n1ql:kv-kv-kv-index-index,GROUP=P0,gsi_type=plasma,plasma_dgm=True
    test_rebalance_in,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,nodes_init=5,nodes_in=1,services_in=kv,services_init=n1ql:kv-kv-kv-index-index,GROUP=P0,gsi_type=plasma,plasma_dgm=True
# test with rebalance-out
    test_rebalance_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv-kv-index-index:n1ql,nodes_init=5,nodes_out=1,targetMaster=True,GROUP=P0,gsi_type=plasma,plasma_dgm=True
    test_rebalance_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,GROUP=P0,gsi_type=plasma,plasma_dgm=True
# test with rebalance-in-out
    test_rebalance_in_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result:verify_explain_result,groups=simple,dataset=default,doc-per-day=10,nodes_in=1,nodes_out=1,services_in=kv,services_init=kv-kv-index-index:n1ql,nodes_out_dist=kv:1,nodes_init=4,targetMaster=True,GROUP=P0,gsi_type=plasma,plasma_dgm=True
    test_rebalance_in_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result:verify_explain_result,groups=simple,dataset=default,doc-per-day=10,nodes_in=1,nodes_out=1,nodes_init=4,services_in=kv,services_init=n1ql:kv-kv-index-index,nodes_out_dist=kv:1,GROUP=P0,gsi_type=plasma,plasma_dgm=True
    test_rebalance_in_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,nodes_in=1,nodes_out=1,nodes_init=4,services_in=index,services_init=n1ql:kv-kv-index-index,nodes_out_dist=index:1,GROUP=P0,gsi_type=plasma,plasma_dgm=True
    test_rebalance_in_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,nodes_in=1,nodes_out=1,nodes_init=4,services_in=kv,services_init=n1ql:kv-kv-index-index,nodes_out_dist=index:1,GROUP=P0,gsi_type=plasma,plasma_dgm=True
    test_rebalance_in_out,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,nodes_in=1,nodes_out=1,nodes_init=4,services_in=index,services_init=n1ql:kv-kv-kv-index,nodes_out_dist=kv:1,GROUP=P0,gsi_type=plasma,plasma_dgm=True
# test with multiple nodes rebalance out
    test_rebalance_in_out_multi_nodes,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result:verify_explain_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv-n1ql-index-index,nodes_init=5,targetMaster=True,GROUP=P1,gsi_type=plasma,plasma_dgm=True
    test_rebalance_in_out_multi_nodes,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result:verify_explain_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv-n1ql-index-index,nodes_init=5,GROUP=P1,gsi_type=plasma,plasma_dgm=True
# test with server crash by killing memcached
    test_server_crash,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv-kv-index-index:n1ql,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,targetMaster=True,targetProcess=memcached,GROUP=P1,gsi_type=plasma,plasma_dgm=True
    test_server_crash,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,targetProcess=memcached,GROUP=P1,gsi_type=plasma,plasma_dgm=True
    test_server_crash,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=index:1,targetProcess=memcached,GROUP=P1,gsi_type=plasma,plasma_dgm=True
# test with server crash by killing indexer
    test_server_crash,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=index:1,targetProcess=indexer,GROUP=P1,gsi_type=plasma,plasma_dgm=True
# test with server crash by killing projector
    test_server_crash,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,targetProcess=projector,GROUP=P1,gsi_type=plasma,plasma_dgm=True
    test_server_crash,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=index:1,targetProcess=projector,GROUP=P1,gsi_type=plasma,plasma_dgm=True
# test with network partitioning
    test_network_partitioning,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=index:1,GROUP=P1,gsi_type=plasma,plasma_dgm=True
# test with server stop
    # test_server_stop,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=index:1,GROUP=P1,gsi_type=plasma,plasma_dgm=True
# test with hard failover
    # The following test will not pass as we kill the master node, this causes a failure in setup
    # Fixing in setup would affect all the TC's as the fix is in basetestcase.py.
    #test_failover,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv-kv-index-index:n1ql,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,targetMaster=True,GROUP=P2,gsi_type=plasma,plasma_dgm=True
    test_failover,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,GROUP=P2,gsi_type=plasma,plasma_dgm=True
    test_failover,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=index:1,GROUP=P2,gsi_type=plasma,plasma_dgm=True
# test with graceful failover
    test_failover,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv-kv-index-index:n1ql,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,graceful=True,targetMaster=True,GROUP=P2,gsi_type=plasma,plasma_dgm=True
# test with failover and add-back recovery
    test_failover_add_back,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=kv-kv:n1ql-index-kv:index,nodes_init=4,nodes_out=1,nodes_out_dist=kv:1,graceful=False,targetMaster=True,GROUP=P2,gsi_type=plasma,plasma_dgm=True
    test_failover_add_back,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,nodes_out=1,nodes_out_dist=kv:1,graceful=False,GROUP=P2,gsi_type=plasma,plasma_dgm=True
# test with indexer failover and add-back recovery
    test_failover_indexer_add_back,before=create_index,after=query_with_explain:verify_explain_result-query:verify_query_result,nodes_init=4,services_init=kv:n1ql-kv-index-index,nodes_out=1,dataset=default,groups=simple,doc-per-day=10,GROUP=P2,gsi_type=plasma,plasma_dgm=True
    test_failover_indexer_add_back,before=create_index,after=query_with_explain:verify_explain_result-query:verify_query_result,nodes_init=4,services_init=kv:n1ql-kv-index-index,nodes_out=1,dataset=default,groups=simple,doc-per-day=10,groups=simple,GROUP=P2,gsi_type=plasma,plasma_dgm=True
# test with multiple dgm/non-dgm indexer recovery
    test_multiple_recovery_with_dgm,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query:verify_query_result,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,nodes_init=5,GROUP=P2,gsi_type=plasma,plasma_dgm=True
# test with bucket flush
    test_couchbase_bucket_flush,nodes_init=5,nodes_out=1,before=create_index,in_between=query,after=query_with_explain:verify_explain_result-query,groups=simple,dataset=default,doc-per-day=10,services_init=n1ql:kv-kv-kv-index-index,GROUP=P2,gsi_type=plasma,plasma_dgm=True

