# Online upgrade
# Attention: Any test with multi buckets ops need to set dgm_run=True
upgrade.upgrade_tests.UpgradeTests:
    test_upgrade,items=20000,initial_version=6.5.0-4960,nodes_init=3,upgrade_type=online,initialize_events=kv_ops_initialize,after_events=rebalance_in-create_fts_index,after_upgrade_services_in=kv:n1ql:index:fts
    test_upgrade,items=20000,initial_version=6.5.0-4960,nodes_init=3,initialize_events=create_fts_index_query_compare,initial-services-setting=kv,index,n1ql-kv,n1ql,index,fts-kv,index,n1ql,fts,upgrade_services_in=same,after_events=rebalance_in-run_fts_query_and_compare,after_upgrade_services_in=kv,index,n1ql,fts,disable_HTP=True,upgrade_test=True,init_nodes=False
    test_upgrade,items=20000,initial_version=6.5.1-6299,nodes_init=3,upgrade_type=online,initialize_events=kv_ops_initialize,after_events=rebalance_in-create_fts_index,after_upgrade_services_in=kv:n1ql:index:fts
    test_upgrade,items=20000,initial_version=6.5.1-6299,nodes_init=3,initialize_events=create_fts_index_query_compare,initial-services-setting=kv,index,n1ql-kv,n1ql,index,fts-kv,index,n1ql,fts,upgrade_services_in=same,after_events=rebalance_in-run_fts_query_and_compare,after_upgrade_services_in=kv,index,n1ql,fts,disable_HTP=True,upgrade_test=True,init_nodes=False

upgrade.upgrade_tests.UpgradeTests:
    test_upgrade,items=5000,initial_version=6.5.0-4960,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,upgrade_services_in=same,upgrade_test=True,init_nodes=False,num_index_replica=2
    test_upgrade,items=5000,initial_version=6.5.0-4960,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,fts,upgrade_services_in=same,upgrade_test=True,init_nodes=False,num_index_replica=2
    test_upgrade,items=5000,initial_version=6.5.1-6299,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,upgrade_services_in=same,upgrade_test=True,init_nodes=False,num_index_replica=2
    test_upgrade,items=5000,initial_version=6.5.1-6299,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,fts,upgrade_services_in=same,upgrade_test=True,init_nodes=False,num_index_replica=2

# test with travel-sample bucket
upgrade.upgrade_tests.UpgradeTests:
    test_upgrade,items=20000,initial_version=6.5.0-4960,nodes_init=3,upgrade_type=online,initialize_events=kv_ops_initialize,after_events=rebalance_in-create_fts_index,travel_sample_bucket=true,after_upgrade_services_in=kv:n1ql:index:fts
    test_upgrade,items=20000,initial_version=6.5.0-4960,nodes_init=3,initialize_events=create_fts_index_query_compare,initial-services-setting=kv,index,n1ql-kv,n1ql,index,fts-kv,index,n1ql,fts,upgrade_services_in=same,travel_sample_bucket=true,after_events=rebalance_in-run_fts_query_and_compare,after_upgrade_services_in=kv,index,n1ql,fts,disable_HTP=True,upgrade_test=True,init_nodes=False
    test_upgrade,items=20000,initial_version=6.5.1-6299,nodes_init=3,upgrade_type=online,initialize_events=kv_ops_initialize,after_events=rebalance_in-create_fts_index,travel_sample_bucket=true,after_upgrade_services_in=kv:n1ql:index:fts
    test_upgrade,items=20000,initial_version=6.5.1-6299,nodes_init=3,initialize_events=create_fts_index_query_compare,initial-services-setting=kv,index,n1ql-kv,n1ql,index,fts-kv,index,n1ql,fts,upgrade_services_in=same,travel_sample_bucket=true,after_events=rebalance_in-run_fts_query_and_compare,after_upgrade_services_in=kv,index,n1ql,fts,disable_HTP=True,upgrade_test=True,init_nodes=False

upgrade.upgrade_tests.UpgradeTests:
    test_upgrade,items=5000,initial_version=6.5.0-4960,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,upgrade_services_in=same,travel_sample_bucket=true,upgrade_test=True,init_nodes=False,num_index_replica=2
    test_upgrade,items=5000,initial_version=6.5.0-4960,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,fts,upgrade_services_in=same,travel_sample_bucket=true,upgrade_test=True,init_nodes=False,num_index_replica=2
    test_upgrade,items=5000,initial_version=6.5.1-6299,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,upgrade_services_in=same,travel_sample_bucket=true,upgrade_test=True,init_nodes=False,num_index_replica=2
    test_upgrade,items=5000,initial_version=6.5.1-6299,nodes_init=3,initialize_events=kv_ops_initialize-create_index_with_replica_and_query,initial-services-setting=kv,index,n1ql-kv,index,n1ql-kv,index,n1ql,fts,upgrade_services_in=same,travel_sample_bucket=true,upgrade_test=True,init_nodes=False,num_index_replica=2
